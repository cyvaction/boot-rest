!function(window,angular,undefined){"use strict";angular.module("brModels",["ngResource"]),angular.module("brControllers",[]),angular.module("brDirectives",[]);var app=angular.module("brApp",["ngAnimate","ngCookies","ngSanitize","ngRoute","xeditable","brModels","brControllers","brDirectives"]);app.config(function($locationProvider,$routeProvider){$locationProvider.hashPrefix("!"),$routeProvider.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}),app.run(function(editableOptions){editableOptions.theme="bs3"})}(window,window.angular),function(window,angular,undefined){"use strict";angular.module("brModels").factory("Message",function($resource){return $resource("/api/messages/:messageId",{messageId:"@id"},{update:{method:"PUT"}})})}(window,window.angular),function(window,angular,_,undefined){"use strict";var _focusNewMessageInput=function(){angular.element("#new-message-input").focus()},_showInputValidationModal=function(){angular.element("#input-validation-modal").modal({show:!0}).on("hidden.bs.modal",function(){_focusNewMessageInput()})};angular.module("brControllers").controller("MainCtrl",function($scope,$log,Message){$scope.messages=[],$scope.newMessage={body:""},_focusNewMessageInput(),$scope.loadMessages=function(){$scope.messages=Message.query(function(messages){$log.debug("Number of messages to display:",messages.length)})},$scope.loadMessages(),$scope.$watch("messages",function(newValues,oldValues){var hasUpdatedMessage=newValues&&oldValues&&newValues.length===oldValues.length&&newValues!==oldValues;hasUpdatedMessage&&_(newValues).each(function(newValue){var oldValue=_(oldValues).find({id:newValue.id}),hasUpdatedMessageBody=oldValue&&oldValue.body!==newValue.body;hasUpdatedMessageBody&&newValue.$update(function(updatedMessage){var indexOfUpdatedMessage=_($scope.messages).findIndex({id:updatedMessage.id});$scope.messages[indexOfUpdatedMessage]=updatedMessage,_focusNewMessageInput()})})},!0),$scope.saveNewMessage=function(){return $scope.messageForm.body.$valid?void Message.save($scope.newMessage,function(savedMessage){$scope.newMessage.body="",$scope.messages.push(savedMessage)}):void _showInputValidationModal()},$scope.deleteMessage=function(messageToDelete){messageToDelete.$delete(function(){_($scope.messages).remove(function(message){return message.id===messageToDelete.id}),_focusNewMessageInput()})}})}(window,window.angular,window._),function(window,angular,undefined){"use strict";angular.module("brDirectives").directive("bsTooltips",function(){return function(scope,element){element.find("[data-toggle=tooltip]").tooltip()}})}(window,window.angular);